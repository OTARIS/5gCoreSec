# -*- coding: utf-8 -*-
from __future__ import absolute_import

from flask import Flask

import v1
from v1 import logs

import threading
import time

def statistics():
	stcs = logs.info+"|    "+repr(logs.eNBConnected)+"           "+"|    "+repr(logs.UEConnected)+"        "+"    |    "+repr(logs.UEAttached)+"         "+"   |    "+repr(logs.s1uBearer)+"            |"+"\n"\
                        +"|----------------|-----------------|-----------------|-----------------|\n"
	print(stcs)
	#print("???????????????????????????????????????????????????????????????????????????????????????????????????????????????/1")
	#print(logs.eNBConnected,logs.UEConnected,logs.UEAttached,logs.s1uBearer)
	#print("???????????????????????????????????????????????????????????????????????????????????????????????????????????????/2")
	#global timer
	#timer = threading.Timer(10.0, statistics)
	#timer.start()	
	global timer
	if timer != None:
		timer.finished.wait(10.0)
		timer.function()   
	else:
		timer = threading.Timer(10.0, statistics)
		timer.start()

def create_app():
    app = Flask(__name__, static_folder='static')
    app.register_blueprint(
        v1.bp,
        url_prefix='/namf-comm/v1')
    return app

if __name__ == '__main__':

	#timer = threading.Timer(10.0, statistics)
	#timer.start()
	#global logs.eNBConnected,logs.UEConnected,logs.UEAttached,logs.s1uBearer
	#statistics()
	#print("-------------------------------------------------------------------------------------------------??????????????????????????????????????----------------------")
	create_app().run(port=5001,debug=True)
